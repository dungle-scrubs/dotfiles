# Atuin Configuration
# Docs: https://docs.atuin.sh/configuration/config/

# Vim-aware keymap (auto-detects zsh-vi-mode)
keymap_mode = "auto"

# Workspace filtering - filter to current git repo when available
workspaces = true

# Default to workspace filter (falls back to global outside git repos)
filter_mode = "workspace"

# Up-arrow shows directory-local history for contextual recall
filter_mode_shell_up_key_binding = "directory"

# Compact UI, auto-expands when needed
style = "compact"
inline_height = 20

# Execute on enter, tab to edit
enter_accept = true

# Show command preview for long commands
show_preview = true
max_preview_height = 4

# Filter sensitive commands from history
history_filter = [
  "^op ",                    # 1Password CLI
  "^export .*SECRET",
  "^export .*TOKEN",
  "^export .*PASSWORD",
  "^export .*KEY",
  ".*--password[= ]",
  ".*--token[= ]",
]

[stats]
common_subcommands = [
  "apt",
  "brew",
  "cargo",
  "docker",
  "git",
  "go",
  "kubectl",
  "nix",
  "npm",
  "pnpm",
  "yarn",
]
common_prefix = ["sudo"]

[sync]
records = true

[dotfiles]
enabled = true

[keys]
scroll_exits = true
